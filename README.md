# NativeThymusScripts
Collection of scripts used for analysis of data in "Intravital Two-Photon Microscopy of the Native Thymus"

# Scripts and Usage:
`VasoMetric_SpencerVersion.ijm` - Modified version of the [VasoMetric script](https://github.com/mcdowellkonnor/ResearchMacros). Modified Script no longer applies a max intensity projection to an image stack. Intended to be used while scrolling through video. No modifications made to vessel diameter calculations. 

`Manual_BloodFlow_Velocity.ijm` - Script used to manually calculate blood flow. Open video and place ROI in the approximate centroid of a negatively contrast labelled RBC for each frame. The script calculates velocity based on the displacement of the centroid across different frames. 

`ResearchScripts.ijm` - Collection of functions used for analysis:

- `addScaleBar()` - Used to properly position scale bar in same spot relative to bottom right corner.
- `volumeAnalysis()` - Get Percentage Area covered by blood vessels. Apply to ROIs generated by `getAnalysisROI()` function.
- `getAnalysisROI()` - Gets random positions within 3D object(pixel = 255). Will not directly overlap position. Saves positions to folder. Files needed: `Downscaled image` -> Image of the downscaled blood vessel network. FOV from Image will be saved to folder. `Mask Image` -> Mask corresponding to the area of original image that will have a position randomly selected from.
- `checkOverlap(x,y,z,dimension)` - called in `getAnalysisROI()` function. Returns `true` if ROI does not overlaps with other ROI in ROIManager. Returns `false` if ROI overlaps in XY within 3 slices of previous ROI.
- `getDistanceVolumeFromDistanceMap()` - Returns mask corresponding to some distance from edge of Distance Map. Assumes Distance Map generated from [3D Suite 3D Distance Map](https://mcib3d.frama.io/3d-suite-imagej/plugins/Binary/3D-Distance-Map-EVF/).
- `getChannelandDownscale()` - Get channels from stitched slices. Open each channel. Adjust pixel parameters. Downscale image by 2. Save stack to scaled folder.
- `segmentThymus()` - Segment Vessel Data with Labkit. Assumes folder contains stack of individual tif files which correspond to single 3D zplane. Saves files to new folder.
